---
title: "[Next.js Doc] 09. Parallel Routes"
date: 2024-01-15
description: Next.js Doc - Parallel Routes
---

#### ì°¸ê³  ë¬¸ì„œ

[Parallel Routes â€“ Next.js doc](https://nextjs.org/docs/app/building-your-application/routing/parallel-routes)

#### On this page

**Parallel Routes**ë¡œ ì—¬ëŸ¬ ê²½ë¡œë¥¼ ë™ì‹œì— ë˜ëŠ” ì¡°ê±´ë¶€ë¡œ ë Œë”ë§í•  ìˆ˜ ìˆë‹¤.

ëŒ€ì‹œë³´ë“œ ë° ì†Œì…œ ì‚¬ì´íŠ¸ì˜ í”¼ë“œì™€ ê°™ì´ ë§¤ìš° ë™ì ì¸ ì•± ì„¹ì…˜ì˜ ê²½ìš° ë³‘ë ¬ ë¼ìš°íŒ…ì„ ì‚¬ìš©í•˜ì—¬ ë³µì¡í•œ ë¼ìš°íŒ… íŒ¨í„´ì„ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤.

ì˜ˆë¥¼ ë“¤ì–´ ì•„ë˜ì™€ ê°™ì´ @team í˜ì´ì§€ì™€ @analytics í˜ì´ì§€ë¥¼ ë™ì‹œì— ë Œë”ë§í•  ìˆ˜ ìˆë‹¤.
![image](https://github.com/tamoimi/tami-dev-blog/assets/100749520/9fdbc797-664c-4f0b-a7b4-da4d82052289)

ë³‘ë ¬ ë¼ìš°íŒ…ìœ¼ë¡œ ë¼ìš°íŠ¸ê°€ ë…ë¦½ì ìœ¼ë¡œ ìŠ¤íŠ¸ë¦¬ë°ë  ë•Œ ê° ê²½ë¡œì— ëŒ€í•œ ì˜¤ë¥˜ ë° ë¡œë”© ìƒíƒœë„ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤.
![image](https://github.com/tamoimi/tami-dev-blog/assets/100749520/a20e360d-eb55-41e3-825c-e2272b7b68ec)

ë³‘ë ¬ ë¼ìš°íŒ…ìœ¼ë¡œ ì¸ì¦ ìƒíƒœì™€ ê°™ì€ íŠ¹ì • ì¡°ê±´ì— ë”°ë¼ ìŠ¬ë¡¯ì„ ì¡°ê±´ë¶€ë¡œ ë Œë”ë§í•  ìˆ˜ ìˆë‹¤. ì´ë¥¼ í†µí•´ ê°™ì€ URLì—ì„œ ì™„ì „íˆ ë¶„ë¦¬ëœ ì½”ë“œë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
![image](https://github.com/tamoimi/tami-dev-blog/assets/100749520/e81c1d83-0eec-4581-bd40-f0d6ab96f5cb)

---

#### ì»¨ë²¤ì…˜

ë³‘ë ¬ ë¼ìš°íŠ¸ëŠ” ëª…ëª…ëœ **ìŠ¬ë¡¯**ì„ ì‚¬ìš©í•˜ì—¬ ìƒì„±ëœë‹¤. ìŠ¬ë¡¯ì€ `@folder` ê·œì¹™ìœ¼ë¡œ ì •ì˜ë˜ë©° propsì™€ ë™ì¼í•œ ìˆ˜ì¤€ ë ˆì´ì•„ì›ƒì— ì „ë‹¬ëœë‹¤.

ğŸ¦§ ìŠ¬ë¡¯ì€ ë¼ìš°íŠ¸ ì„¸ê·¸ë¨¼íŠ¸ê°€ _ì•„ë‹ˆë©° URL êµ¬ì¡°ì— ì˜í–¥ì„ ì£¼ì§€ ì•ŠëŠ”ë‹¤_. `/@team/members` íŒŒì¼ ê²½ë¡œëŠ” `/members`ì—ì„œ ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆë‹¤.

ì˜ˆë¥¼ ë“¤ì–´ ì•„ë˜ íŒŒì¼ êµ¬ì¡°ëŠ” ë‘ ê°œì˜ ëª…ì‹œì  ìŠ¬ë¡¯ì„ ì •ì˜í•œë‹¤: `@analytics` ë° `@team`
![image](https://github.com/tamoimi/tami-dev-blog/assets/100749520/1a242550-5e47-4bd7-b7fb-c3fd5b4ba41d)
ìœ„ì˜ í´ë” êµ¬ì¡°ëŠ” `app/layout.js`ì˜ ì»´í¬ë„ŒíŠ¸ê°€ `@analytics` ë° `@team` ìŠ¬ë¡¯ propsë¥¼ ë°›ê³ , `children` propê³¼ í•¨ê»˜ ë³‘ë ¬ë¡œ ë Œë”ë§í•  ìˆ˜ ìˆë„ë¡ í•œë‹¤:

`app/layout.tsx`

```tsx
export default function Layout(props: {
  children: React.ReactNode;
  analytics: React.ReactNode;
  team: React.ReactNode;
}) {
  return (
    <>
      {props.children}
      {props.team}
      {props.analytics}
    </>
  );
}
```

â˜„ï¸ **Good to know**

`children` propì€ í´ë”ì— ë§¤í•‘í•  í•„ìš”ê°€ ì—†ëŠ” ì•”ì‹œì  ìŠ¬ë¡¯ì´ë‹¤. ì¦‰ `app/page.js`ì€`app/@children/page.js`ì™€ ë™ì¼í•˜ë‹¤.

---

#### Unmatched Routes

ê¸°ë³¸ì ìœ¼ë¡œ ìŠ¬ë¡¯ ë‚´ì—ì„œ ë Œë”ë§ë˜ëŠ” ë‚´ìš©ì€ í˜„ì¬ URLê³¼ ì¼ì¹˜í•œë‹¤.

ì¼ì¹˜í•˜ì§€ ì•ŠëŠ” ìŠ¬ë¡¯ì˜ ê²½ìš° Next.jsê°€ ë Œë”ë§í•˜ëŠ” ì½˜í…ì¸ ëŠ” ë¼ìš°íŒ… ê¸°ìˆ ê³¼ í´ë” êµ¬ì¡°ì— ë”°ë¼ ë‹¤ë¥´ë‹¤.

#### `default.js`

Next.jsê°€ í˜„ì¬ URLì„ ê¸°ë°˜ìœ¼ë¡œ ìŠ¬ë¡¯ì˜ í™œì„± ìƒíƒœë¥¼ ë³µêµ¬í•  ìˆ˜ ì—†ëŠ” ê²½ìš° fallbackìœ¼ë¡œ ë Œë”ë§ í•  `default.js` íŒŒì¼ì„ ì •ì˜í•  ìˆ˜ ìˆë‹¤.

ì•„ë˜ í´ë” êµ¬ì¡°ë¥¼ ê³ ë ¤í•˜ì. `@team` ìŠ¬ë¡¯ì—ëŠ” `settings` ë””ë ‰í„°ë¦¬ê°€ ìˆì§€ë§Œ `@analytics`ì—ëŠ” ì—†ë‹¤.
![image](https://github.com/tamoimi/tami-dev-blog/assets/100749520/f48792b5-d788-4897-b248-6c950bb1830e)

#### ë„¤ë¹„ê²Œì´ì…˜

íƒìƒ‰ ì‹œ Next.jsëŠ” í˜„ì¬ URLê³¼ ì¼ì¹˜í•˜ì§€ ì•Šë”ë¼ë„ ìŠ¬ë¡¯ì˜ ì´ì „ í™œì„± ìƒíƒœë¥¼ ë Œë”ë§í•œë‹¤.

#### ìƒˆë¡œê³ ì¹¨

ìƒˆë¡œê³ ì¹¨í•  ë•Œ Next.jsëŠ” ë¨¼ì € ì¼ì¹˜í•˜ì§€ ì•ŠëŠ” ìŠ¬ë¡¯ì˜ `default.js` íŒŒì¼ì„ ë Œë”ë§í•˜ë ¤ê³  ì‹œë„í•œë‹¤. ë§Œì•½ ì‚¬ìš©í•  ìˆ˜ ì—†ëŠ” ê²½ìš° 404ê°€ ë Œë”ë§ëœë‹¤.

ğŸ¦§ 404ëŠ” ë³‘ë ¬ ë Œë”ë§ë˜ì–´ì„œëŠ” ì•ˆ ë˜ëŠ” ê²½ë¡œë¥¼ ì‹¤ìˆ˜ë¡œ ë Œë”ë§í•˜ì§€ ì•Šë„ë¡ í•˜ëŠ” ë° ë„ì›€ëœë‹¤.

---

#### `useSelectedLayoutSegment(s)`

[`useSelectedLayoutSegment`](https://nextjs.org/docs/app/api-reference/functions/use-selected-layout-segment)ì™€ [`useSelectedLayoutSegments`](https://nextjs.org/docs/app/api-reference/functions/use-selected-layout-segments)ëŠ” ëª¨ë‘í•´ë‹¹ ìŠ¬ë¡¯ ë‚´ì—ì„œ í™œì„± ë¼ìš°íŠ¸ ì„¸ê·¸ë¨¼íŠ¸ë¥¼ ì½ì„ ìˆ˜ ìˆë„ë¡ í•˜ëŠ” `parallelRoutesKey`ë¥¼ í—ˆìš©í•œë‹¤.

`app/layout.tsx`

```tsx
"use client";

import { useSelectedLayoutSegment } from "next/navigation";

export default function Layout(props: {
  //...
  auth: React.ReactNode;
}) {
  const loginSegments = useSelectedLayoutSegment("auth");
  // ...
}
```

ì‚¬ìš©ìê°€ `@auth/login` ë˜ëŠ” URL í‘œì‹œì¤„ì˜ `/login`ìœ¼ë¡œ ì´ë™í•˜ë©´ `loginSegments`ëŠ” `"login`" ë¬¸ìì—´ê³¼ ê°™ë‹¤.

---

#### ì˜ˆì œ

#### ëª¨ë‹¬

ë³‘ë ¬ ë¼ìš°íŒ…ì„ ì‚¬ìš©í•˜ì—¬ ëª¨ë‹¬ì„ ë Œë”ë§í•  ìˆ˜ ìˆë‹¤.
![image](https://github.com/tamoimi/tami-dev-blog/assets/100749520/ce41f283-527d-4138-b95e-d4d220e67dc4)
`@auth` ìŠ¬ë¡¯ì€ ì¼ì¹˜í•˜ëŠ” ê²½ë¡œ(ì˜ˆ: `/login`)ë¡œ ì´ë™í•˜ì—¬ í‘œì‹œí•  ìˆ˜ ìˆëŠ” `<Modal>` ì»´í¬ë„ŒíŠ¸ë¥¼ ë Œë”ë§í•œë‹¤.

`app/layout.tsx`

```tsx
export default async function Layout(props: {
  // ...
  auth: React.ReactNode;
}) {
  return (
    <>
      {/* ... */}
      {props.auth}
    </>
  );
}
```

`app/@auth/login/page.tsx`

```tsx
import { Modal } from "components/modal";

export default function Login() {
  return (
    <Modal>
      <h1>Login</h1>
      {/* ... */}
    </Modal>
  );
}
```

ëª¨ë‹¬ì´ í™œì„±í™”ë˜ì§€ ì•Šì€ ê²½ìš° ëª¨ë‹¬ì˜ ì½˜í…ì¸ ê°€ ë Œë”ë§ë˜ì§€ ì•Šë„ë¡ í•˜ë ¤ë©´ `null`ì„ ë°˜í™˜í•˜ëŠ” `default.js` íŒŒì¼ì„ ìƒì„±í•  ìˆ˜ ìˆë‹¤.

`app/@auth/default.tsx`

```tsx
export default function Default() {
  return null;
}
```

#### ëª¨ë‹¬ í•´ì œ

ë§Œì•½ í´ë¼ì´ì–¸íŠ¸ íƒìƒ‰ì„ í†µí•´ ëª¨ë‹¬ì´ ì‹œì‘ëœ ê²½ìš° `<Link href="/login">`ì„ ì‚¬ìš©í•˜ë©´ `router.back()`ì„ í˜¸ì¶œí•˜ê±°ë‚˜ `Link` ì»´í¬ë„ŒíŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ëª¨ë‹¬ì„ í•´ì œí•  ìˆ˜ ìˆë‹¤.

`app/@auth/login/page.tsx`

```tsx
"use client";
import { useRouter } from "next/navigation";
import { Modal } from "components/modal";

export default function Login() {
  const router = useRouter();
  return (
    <Modal>
      <span onClick={() => router.back()}>Close modal</span>
      <h1>Login</h1>
      ...
    </Modal>
  );
}
```

ë‹¤ë¥¸ ê³³ìœ¼ë¡œ ì´ë™í•˜ê³  ëª¨ë‹¬ì„ ë‹«ìœ¼ë ¤ë©´ catch-all ë¼ìš°íŠ¸ë¥¼ ì‚¬ìš©í•  ìˆ˜ë„ ìˆë‹¤.
![image](https://github.com/tamoimi/tami-dev-blog/assets/100749520/29855fc3-b171-494a-aa67-ffcec3141247)

`app/@auth/[...catchAll]/page.tsx`

```tsx
export default function CatchAll() {
  return null;
}
```

catch-all ê²½ë¡œëŠ” `default.js`ë³´ë‹¤ ìš°ì„  ìˆœìœ„ë‹¤.

#### ì¡°ê±´ë¶€ ë¼ìš°íŠ¸

ë³‘ë ¬ ë¼ìš°íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ì¡°ê±´ë¶€ ë¼ìš°íŒ…ì„ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ì¸ì¦ ìƒíƒœì— ë”°ë¼ `@dashboard` ë˜ëŠ” `@login` ê²½ë¡œë¥¼ ë Œë”ë§í•  ìˆ˜ ìˆë‹¤.

`app/layout.tsx`

```tsx
import { getUser } from "@/lib/auth";

export default function Layout({ dashboard, login }: { dashboard: React.ReactNode; login: React.ReactNode }) {
  const isLoggedIn = getUser();
  return isLoggedIn ? dashboard : login;
}
```

![image](https://github.com/tamoimi/tami-dev-blog/assets/100749520/f294bd1a-16c4-40eb-929c-2c10cc62d832)
