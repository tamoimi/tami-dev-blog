---
title: "[Next.js Doc] 07. Loading UI and Streaming"
date: 2024-01-11
description: Next.js Doc - Loading UI and Streaming
---

#### ì°¸ê³  ë¬¸ì„œ

[Dynamic Routes â€“ Next.js doc](https://nextjs.org/docs/app/building-your-application/routing/loading-ui-and-streaming)

íŠ¹ìˆ˜ íŒŒì¼ `loading.js`ëŠ” [React Suspense](https://react.dev/reference/react/Suspense)ë¥¼ ì‚¬ìš©í•˜ì—¬ ì˜ë¯¸ ìˆëŠ” Loading UIë¥¼ ë§Œë“œëŠ” ë° ë„ì›€ì´ ëœë‹¤. ì´ ê·œì¹™ìœ¼ë¡œ ë¼ìš°íŠ¸ ì„¸ê·¸ë¨¼íŠ¸ì˜ ì½˜í…ì¸ ê°€ ë¡œë“œë˜ëŠ” ë™ì•ˆ ì„œë²„ì—ì„œ [ì¦‰ì‹œ ë¡œë“œ ìƒíƒœ](https://nextjs.org/docs/app/building-your-application/routing/loading-ui-and-streaming#instant-loading-states)ë¥¼ í‘œì‹œí•  ìˆ˜ ìˆë‹¤. ë Œë”ë§ì´ ì™„ë£Œë˜ë©´ ìƒˆ ì½˜í…ì¸ ê°€ ìë™ìœ¼ë¡œ êµì²´ëœë‹¤.

![image](https://github.com/tamoimi/tami-dev-blog/assets/100749520/aafd29ea-6883-438d-ac05-22e4b1c0766d)

#### ì¦‰ì‹œ ë¡œë”© ìƒíƒœ

ì¦‰ì‹œ ë¡œë”© ìƒíƒœëŠ” íƒìƒ‰ ì‹œ ì¦‰ì‹œ í‘œì‹œë˜ëŠ” ëŒ€ì²´ UIë‹¤. ìŠ¤ì¼ˆë ˆí†¤ê³¼ ìŠ¤í”¼ë„ˆì™€ ê°™ì€ ë¡œë”©ì„ ì»¤ë²„ í¬í† , ì œëª© ë“±ê³¼ ê°™ì€ í–¥í›„ í™”ë©´ì˜ ì‘ì§€ë§Œ ì˜ë¯¸ ìˆëŠ” ë¶€ë¶„ì„ ë¯¸ë¦¬ ë Œë”ë§í•  ìˆ˜ ìˆë‹¤.

ì´ê²ƒìœ¼ë¡œ ì‚¬ìš©ìëŠ” ì•±ì´ ì‘ë‹µí•˜ê³  ìˆìŒì„ ì´í•´í•˜ê³  ë” ë‚˜ì€ ì‚¬ìš©ì ê²½í—˜ì„ ì œê³µí•  ìˆ˜ ìˆë‹¤.

í´ë” ì•ˆì— `loading.js` íŒŒì¼ì„ ì¶”ê°€í•˜ì—¬ ë¡œë”© ìƒíƒœë¥¼ ë§Œë“ ë‹¤.
![image](https://github.com/tamoimi/tami-dev-blog/assets/100749520/34e24605-c006-4207-87f5-ab03aced223a)

`app/dashboard/loading.tsx`

```tsx
export default function Loading() {
  // You can add any UI inside Loading, including a Skeleton.
  return <LoadingSkeleton />;
}
```

ê°™ì€ í´ë”ì—ì„œ `loading.js`ëŠ” `layout.js` ì•ˆì— ì¤‘ì²©ëœë‹¤. `page.js` íŒŒì¼ê³¼ ê·¸ ì•„ë˜ì˜ ëª¨ë“  í•˜ìœ„ í•­ëª©ì„ `<Suspense>` ê²½ê³„ì— ìë™ìœ¼ë¡œ ë˜í•‘í•œë‹¤.
![image](https://github.com/tamoimi/tami-dev-blog/assets/100749520/b1d36b14-f24e-4576-a893-7343d2405637)

â˜„ï¸ **Good to know**

- [server-centric routing](https://nextjs.org/docs/app/building-your-application/routing/linking-and-navigating#how-routing-and-navigation-works)ì„ ì‚¬ìš©í•˜ë”ë¼ë„ íƒìƒ‰ì€ ì¦‰ê°ì ì´ë‹¤.
- íƒìƒ‰ì€ ì¤‘ë‹¨ ê°€ëŠ¥í•˜ë‹¤. ì¦‰, ë¼ìš°íŠ¸ë¥¼ ë³€ê²½í•  ë•Œ ë‹¤ë¥¸ ë¼ìš°íŠ¸ë¡œ ì´ë™í•˜ê¸° ì „ì— ë¼ìš°íŠ¸ì˜ ì½˜í…ì¸ ê°€ ì™„ì „íˆ ë¡œë“œë  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦´ í•„ìš”ê°€ ì—†ë‹¤.
- ìƒˆë¡œìš´ ë¼ìš°íŠ¸ ì„¸ê·¸ë¨¼íŠ¸ê°€ ë¡œë“œë˜ëŠ” ë™ì•ˆ ê³µìœ  ë ˆì´ì•„ì›ƒì€ ì¸í„°ë ‰í‹°ë¸Œí•˜ê²Œ ìœ ì§€ëœë‹¤.

ğŸ¦§ **Recommendation**

Next.jsê°€ ì´ ê¸°ëŠ¥ì„ ìµœì í™”í•˜ë¯€ë¡œ ë¼ìš°íŠ¸ ì„¸ê·¸ë¨¼íŠ¸(ë ˆì´ì•„ì›ƒ ë° í˜ì´ì§€)ì— `loading.js` ê·œì¹™ì„ ì‚¬ìš©í•˜ì.

---

#### ì„œìŠ¤íœìŠ¤ë¥¼ ì´ìš©í•œ ìŠ¤íŠ¸ë¦¬ë°

`loading.js` ì™¸ì—ë„ ìì²´ UI ì»´í¬ë„ŒíŠ¸ì— ëŒ€í•œ Suspense ê²½ê³„ë¥¼ ìˆ˜ë™ìœ¼ë¡œ ìƒì„±í•  ìˆ˜ ìˆë‹¤. ì•± ë¼ìš°í„°ëŠ” [Node.js and Edge runtimes](https://nextjs.org/docs/app/building-your-application/rendering/edge-and-nodejs-runtimes) ëª¨ë‘ì— ëŒ€í•´ [Suspense](https://react.dev/reference/react/Suspense)ë¥¼ ì‚¬ìš©í•œ ìŠ¤íŠ¸ë¦¬ë°ì„ ì§€ì›í•œë‹¤.

#### ìŠ¤íŠ¸ë¦¬ë°ì´ë€?

Reactì™€ Next.jsì—ì„œ ìŠ¤íŠ¸ë¦¬ë°ì´ ì‘ë™í•˜ëŠ” ë°©ì‹ì„ ë°°ìš°ë ¤ë©´ **Server-Side Rendering (SSR)** ê³¼ ê·¸ ì œí•œ ì‚¬í•­ì„ ì´í•´í•˜ëŠ” ê²ƒì´ ë„ì›€ëœë‹¤.

SSRì„ ì‚¬ìš©í•  ë•Œ ì‚¬ìš©ìê°€ í˜ì´ì§€ë¥¼ ë³´ê³  ìƒí˜¸ ì‘ìš©í•˜ê¸° ì „ì— ì™„ë£Œí•´ì•¼ í•˜ëŠ” ë‹¨ê³„ê°€ ìˆë‹¤:

1. ë¨¼ì €, ì„œë²„ì—ì„œ íŠ¹ì • í˜ì´ì§€ì˜ ëª¨ë“  ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¨ë‹¤.
2. ê·¸ ì„œë²„ëŠ” í˜ì´ì§€ì˜ HTMLì„ ë Œë”ë§í•œë‹¤.
3. í˜ì´ì§€ì˜ HTML, CSS ë° JavaScriptê°€ í´ë¼ì´ì–¸íŠ¸ë¡œ ì „ì†¡ëœë‹¤.
4. ìƒì„±ëœ HTML ë° CSSë¥¼ ì‚¬ìš©í•˜ì—¬ ë¹„ëŒ€í™”í˜• ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ê°€ í‘œì‹œëœë‹¤.
5. ë§ˆì§€ë§‰ìœ¼ë¡œ ReactëŠ” UIë¥¼ ëŒ€í™”í˜•ìœ¼ë¡œ ë§Œë“¤ê¸° ìœ„í•´ [hydrates](https://react.dev/reference/react-dom/client/hydrateRoot#hydrating-server-rendered-html)í•œë‹¤.

![image](https://github.com/tamoimi/tami-dev-blog/assets/100749520/56377e57-d6f8-442f-972a-812eaebc4a54)

ì´ ë‹¨ê³„ëŠ” ìˆœì°¨ì ì´ë©° ì°¨ë‹¨ëœë‹¤. ì¦‰, ëª¨ë“  ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¨ í›„ì—ë§Œ ì„œë²„ê°€ í˜ì´ì§€ì˜ HTMLì„ ë Œë”ë§í•  ìˆ˜ ìˆë‹¤. ê·¸ë¦¬ê³  í´ë¼ì´ì–¸íŠ¸ì—ì„œ ReactëŠ” í˜ì´ì§€ì˜ ëª¨ë“  ì»´í¬ë„ŒíŠ¸ì— ëŒ€í•œ ì½”ë“œê°€ ë‹¤ìš´ë¡œë“œëœ í›„ì—ë§Œ UIë¥¼ í•˜ì´ë“œë ˆì´ì…˜í•  ìˆ˜ ìˆë‹¤.

React ë° Next.jsë¥¼ ì‚¬ìš©í•œ SSRì€ ì‚¬ìš©ìì—ê²Œ ë¹„ëŒ€í™”í˜• í˜ì´ì§€ë¥¼ ê°€ëŠ¥í•œ ë¹¨ë¦¬ í‘œì‹œí•´ ë¡œë”© ì„±ëŠ¥ì„ í–¥ìƒì‹œí‚¤ëŠ” ë° ë„ì›€ì´ ëœë‹¤.

![image](https://github.com/tamoimi/tami-dev-blog/assets/100749520/56377e57-d6f8-442f-972a-812eaebc4a54)

ê·¸ëŸ¬ë‚˜ í˜ì´ì§€ê°€ ì‚¬ìš©ìì—ê²Œ í‘œì‹œë˜ê¸° ì „ì— ì„œë²„ì—ì„œ ëª¨ë“  ë°ì´í„° ê°€ì ¸ì˜¤ê¸°ê°€ ì™„ë£Œë˜ì–´ì•¼ í•˜ë¯€ë¡œ ì—¬ì „íˆ ì†ë„ê°€ ëŠë¦´ ìˆ˜ ìˆë‹¤.

**Streaming**ì„ ì‚¬ìš©í•˜ë©´ í˜ì´ì§€ì˜ HTMLì„ ë” ì‘ì€ ì²­í¬ë¡œ ë‚˜ëˆ„ê³  ì ì§„ì ìœ¼ë¡œ í•´ë‹¹ ì²­í¬ë¥¼ ì„œë²„ì—ì„œ í´ë¼ì´ì–¸íŠ¸ë¡œ ë³´ë‚¼ ìˆ˜ ìˆë‹¤.

![image](https://github.com/tamoimi/tami-dev-blog/assets/100749520/56377e57-d6f8-442f-972a-812eaebc4a54)

ìŠ¤íŠ¸ë¦¬ë°ìœ¼ë¡œ UIê°€ ë Œë”ë§ë˜ê¸° ì „ì— ëª¨ë“  ë°ì´í„°ê°€ ë¡œë“œë  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¬ì§€ ì•Šê³  í˜ì´ì§€ì˜ ì¼ë¶€ë¥¼ ë” ë¹¨ë¦¬ í‘œì‹œí•  ìˆ˜ ìˆë‹¤.

ìŠ¤íŠ¸ë¦¬ë°ì€ ê° ì»´í¬ë„ŒíŠ¸ê°€ í•˜ë‚˜ì˜ ë©ì–´ë¦¬ë¡œ ê°„ì£¼ë  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— Reactì˜ ì»´í¬ë„ŒíŠ¸ ëª¨ë¸ê³¼ ì˜ ì‘ë™í•œë‹¤. ìš°ì„ ìˆœìœ„ê°€ ë” ë†’ê±°ë‚˜(ì˜ˆ: ì œí’ˆ ì •ë³´) ë°ì´í„°ì— ì˜ì¡´í•˜ì§€ ì•ŠëŠ” ì»´í¬ë„ŒíŠ¸(ì˜ˆ: ë ˆì´ì•„ì›ƒ)ë¥¼ ë¨¼ì € ë³´ë‚¼ ìˆ˜ ìˆìœ¼ë©° ReactëŠ” ë” ì¼ì° hydrationì„ ì‹œì‘í•  ìˆ˜ ìˆë‹¤.

ìš°ì„ ìˆœìœ„ê°€ ë‚®ì€ ì»´í¬ë„ŒíŠ¸(ì˜ˆ: ë¦¬ë·°, ê´€ë ¨ ì œí’ˆ)ëŠ” ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¨ í›„ ê°™ì€ ì„œë²„ ìš”ì²­ìœ¼ë¡œ ì „ì†¡í•  ìˆ˜ ìˆë‹¤.

![image](https://github.com/tamoimi/tami-dev-blog/assets/100749520/3dabf537-ce97-4482-a5c0-14232a0b5cf9)

ìŠ¤íŠ¸ë¦¬ë°ì€ [TTFB(Time To First Byte)](https://web.dev/ttfb/) ë° [FCP(First Contentful Paint)](https://web.dev/first-contentful-paint/)ë¥¼ ì¤„ì¼ ìˆ˜ ìˆìœ¼ë¯€ë¡œ ê¸´ ë°ì´í„° ìš”ì²­ìœ¼ë¡œ ì¸í•´ í˜ì´ì§€ ë Œë”ë§ì´ ì°¨ë‹¨ë˜ëŠ” ê²ƒì„ ë°©ì§€í•˜ë ¤ëŠ” ê²½ìš° íŠ¹íˆ ìœ ìš©í•˜ë‹¤.

ë˜í•œ ëŠë¦° ì¥ì¹˜ì—ì„œ [TTI(Time to Interactive)](https://developer.chrome.com/en/docs/lighthouse/performance/interactive/)ë¥¼ ê°œì„ í•˜ëŠ” ë° ë„ì›€ëœë‹¤.

#### ì˜ˆì œ

`<Suspense>`ëŠ” ë¹„ë™ê¸° ì‘ì—…(ì˜ˆ: ë°ì´í„° ê°€ì ¸ì˜¤ê¸°)ì„ ìˆ˜í–‰í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ ë˜í•‘í•˜ê³  í•´ë‹¹ ì‘ì—…ì´ ì§„í–‰ë˜ëŠ” ë™ì•ˆ ëŒ€ì²´ UI(ì˜ˆ: ìŠ¤ì¼ˆë ˆí†¤, ìŠ¤í”¼ë„ˆ)ë¥¼ í‘œì‹œí•œ ë‹¤ìŒ ì‘ì—…ì´ ì™„ë£Œë˜ë©´ ì»´í¬ë„ŒíŠ¸ë¥¼ êµì²´í•œë‹¤.

`app/dashboard/page.tsx`

```tsx
import { Suspense } from "react";
import { PostFeed, Weather } from "./Components";

export default function Posts() {
  return (
    <section>
      <Suspense fallback={<p>Loading feed...</p>}>
        <PostFeed />
      </Suspense>
      <Suspense fallback={<p>Loading weather...</p>}>
        <Weather />
      </Suspense>
    </section>
  );
}
```

Suspenseë¥¼ ì‚¬ìš©í•˜ë©´ ì•„ë˜ì™€ ê°™ì€ ì¥ì ì„ ì–»ì„ ìˆ˜ ìˆë‹¤:

1. **ìŠ¤íŠ¸ë¦¬ë° ì„œë²„ ë Œë”ë§** - ì„œë²„ì—ì„œ í´ë¼ì´ì–¸íŠ¸ë¡œ HTMLì„ ì ì§„ì ìœ¼ë¡œ ë Œë”ë§í•œë‹¤.
2. **ì„ íƒì  í•˜ì´ë“œë ˆì´ì…˜** - ReactëŠ” ì‚¬ìš©ì ìƒí˜¸ ì‘ìš©ì„ ê¸°ë°˜ìœ¼ë¡œ ì–´ë–¤ ì»´í¬ë„ŒíŠ¸ë¥¼ ë¨¼ì € ë™ì ìœ¼ë¡œ ë§Œë“¤ ê²ƒì¸ì§€ ìš°ì„  ìˆœìœ„ë¥¼ ì •í•  ìˆ˜ ìˆë‹¤.

ë” ë§ì€ Suspense ì˜ˆì œì™€ ì‚¬ìš© ì‚¬ë¡€ë¥¼ ë³´ë ¤ë©´ [React Documentation](https://react.dev/reference/react/Suspense)ì„ ì°¸ì¡°í•˜ì.

#### SEO

- Next.jsëŠ” UIë¥¼ í´ë¼ì´ì–¸íŠ¸ë¡œ ìŠ¤íŠ¸ë¦¬ë°í•˜ê¸° ì „ì— [`generateMetadata`](https://nextjs.org/docs/app/api-reference/functions/generate-metadata) ë‚´ë¶€ì˜ ë°ì´í„° í˜ì¹­ì´ ì™„ë£Œë  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦°ë‹¤. ì´ë ‡ê²Œ ìŠ¤íŠ¸ë¦¬ë°ëœ ì‘ë‹µì˜ ì²« ë²ˆì§¸ ë¶€ë¶„ì— `<head>` íƒœê·¸ê°€ í¬í•¨ëœë‹¤.
- ìŠ¤íŠ¸ë¦¬ë°ì€ ì„œë²„ì—ì„œ ë Œë”ë§ë˜ê¸°ì— SEOì— ì˜í–¥ì„ ì£¼ì§€ ì•ŠëŠ”ë‹¤. Googleì˜ [Mobile Friendly Test](https://search.google.com/test/mobile-friendly) ë„êµ¬ë¥¼ ì‚¬ìš©í•˜ë©´ í˜ì´ì§€ê°€ Google ì›¹ í¬ë¡¤ëŸ¬ì— ì–´ë–»ê²Œ í‘œì‹œë˜ëŠ”ì§€ í™•ì¸í•˜ê³  ì§ë ¬í™”ëœ HTML([source](https://web.dev/rendering-on-the-web/#seo-considerations))ì„ ë³¼ ìˆ˜ ìˆë‹¤.

#### Status ì½”ë“œ

ìŠ¤íŠ¸ë¦¬ë°í•  ë•Œ ìš”ì²­ì´ ì„±ê³µí–ˆìŒì„ ì•Œë¦¬ê¸° ìœ„í•´ `200` status ì½”ë“œê°€ ë°˜í™˜ëœë‹¤.

ì˜ˆë¥¼ ë“¤ì–´Â [`redirect`](https://nextjs.org/docs/app/api-reference/functions/redirect)Â ì´ë‚˜Â [`notFound`](https://nextjs.org/docs/app/api-reference/functions/not-found)ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ì„œë²„ëŠ” ìŠ¤íŠ¸ë¦¬ë°ëœ ì½˜í…ì¸  ìì²´ ë‚´ì—ì„œ í´ë¼ì´ì–¸íŠ¸ì— ì˜¤ë¥˜ë‚˜ ë¬¸ì œë¥¼ ê³„ì† ì „ë‹¬í•  ìˆ˜ ìˆë‹¤.

response headersê°€ ì´ë¯¸ í´ë¼ì´ì–¸íŠ¸ì— ì „ì†¡ë˜ì—ˆê¸°ì— ì‘ë‹µì˜ status ì½”ë“œë¥¼ ì—…ë°ì´íŠ¸í•  ìˆ˜ ì—†ë‹¤. ì´ëŠ” SEOì— ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•ŠëŠ”ë‹¤.
