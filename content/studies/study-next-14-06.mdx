---
title: "[Learn Next.js] 6. Setting Up Your Database"
date: 2023-11-29
description: Learn Next.js - Setting Up Your Database
---

#### ì°¸ê³  ë¬¸ì„œ

[Setting Up Your Database â€“ Next](https://nextjs.org/learn/dashboard-app/setting-up-your-database)

---

ğŸ’¡ **In this chapterâ€¦**

- í”„ë¡œì íŠ¸ë¥¼ GitHubì— pushí•˜ê¸°
- ì¦‰ê°ì ì¸ ë¯¸ë¦¬ë³´ê¸° ë° ë°°í¬ë¥¼ ìœ„í•´ Vercel ê³„ì •ì„ ì„¤ì •í•˜ê³  GitHub ì €ì¥ì†Œ ì—°ê²°í•˜ê¸°
- í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•˜ê³  Postgres ë°ì´í„°ë² ì´ìŠ¤ì— ì—°ê²°í•˜ê¸°
- ì´ˆê¸° ë°ì´í„°ë¡œ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì‹œë“œí•˜ê¸°

---

#### GitHub ì €ì¥ì†Œ ìƒì„±

ì‹œì‘í•˜ê¸°ìœ„í•´, ì•„ì§ ìˆ˜í–‰í•˜ì§€ ì•Šì•˜ë‹¤ë©´ ì €ì¥ì†Œë¥¼ Githubì— í‘¸ì‹œí•´ ë³´ì. ì´ë ‡ê²Œ í•˜ë©´ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ë” ì‰½ê²Œ ì„¤ì •í•˜ê³  ë°°í¬í•  ìˆ˜ ìˆë‹¤.

ì €ì¥ì†Œë¥¼ ì„¤ì •í•˜ëŠ” ë° ë„ì›€ì´ í•„ìš”í•˜ë©´ GitHubì—ì„œ ì´ [ê°€ì´ë“œ](https://help.github.com/en/github/getting-started-with-github/create-a-repo)ë¥¼ ì‚´í´ë³´ì.

â“ **Good to know:**

- GitLab ë˜ëŠ” Bitbucketê³¼ ê°™ì€ ë‹¤ë¥¸ Git ê³µê¸‰ìë¥¼ ì‚¬ìš©í•  ìˆ˜ë„ ìˆë‹¤.
- GitHubë¥¼ ì²˜ìŒ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ë‹¨ìˆœí™”ëœ ê°œë°œ ì›Œí¬í”Œë¡œìš°ë¥¼ ìœ„í•´ [GitHub Desktop App](https://desktop.github.com/)ì„ ê¶Œì¥í•œë‹¤.

---

#### Vercel ê³„ì • ìƒì„±

[vercel.com/signup](http://vercel.com/signup%EC%9D%84)ì„ ë°©ë¬¸í•˜ì—¬ ê³„ì •ì„ ë§Œë“¤ì. ë¬´ë£Œ "ì·¨ë¯¸"í”Œëœì„ ì„ íƒí•˜ì. **GitHubë¡œ ê³„ì†ì„ ì„ íƒ**í•˜ì—¬ GitHubì™€ Vercel ê³„ì •ì„ ì—°ê²°í•˜ì.

---

#### í”„ë¡œì íŠ¸ ì—°ê²° ë° ë°°í¬

ë‹¤ìŒìœ¼ë¡œ, ë°©ê¸ˆ ìƒì„±í•œ GitHub ì €ì¥ì†Œë¥¼ ì„ íƒí•˜ê³  ê°€ì ¸ì˜¬ ìˆ˜ ìˆëŠ” ì´ í™”ë©´ìœ¼ë¡œ ì´ë™í•˜ê²Œ ëœë‹¤:
![image](https://github.com/tamoimi/tami-dev-blog/assets/100749520/478028ef-5662-4235-89c9-da0803771f77)

í”„ë¡œì íŠ¸ ì´ë¦„ì„ ì§€ì •í•˜ê³  ë°°í¬ë¥¼ í´ë¦­í•œë‹¤.
![image](https://github.com/tamoimi/tami-dev-blog/assets/100749520/25296a41-7b96-4c0f-979c-4c48ead6d6f7)

Hooray! ğŸ‰ ì´ì œ í”„ë¡œì íŠ¸ê°€ ë°°í¬ë˜ì—ˆë‹¤.
![image](https://github.com/tamoimi/tami-dev-blog/assets/100749520/35f240d0-0b7e-4b44-891e-fb76b557382f)
GitHub ë¦¬í¬ì§€í† ë¦¬ë¥¼ ì—°ê²°í•˜ë©´ ë³€ê²½ ì‚¬í•­ì„ **ë©”ì¸** ë¸Œëœì¹˜ì— í‘¸ì‹œí•  ë•Œë§ˆë‹¤ Vercelì´ ìë™ìœ¼ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì¬ë°°í¬í•œë‹¤.

pull requestsë¥¼ ì—´ë©´ ë°°í¬ ì˜¤ë¥˜ë¥¼ ì´ˆê¸°ì— íŒŒì•…í•˜ê³  í”¼ë“œë°±ì„ ìœ„í•´ íŒ€ êµ¬ì„±ì›ê³¼ í”„ë¡œì íŠ¸ ë¯¸ë¦¬ë³´ê¸°ë¥¼ ê³µìœ í•  ìˆ˜ ìˆëŠ” [ì¦‰ê°ì ì¸ ë¯¸ë¦¬ë³´ê¸°ë„](https://vercel.com/docs/deployments/preview-deployments#preview-urls) ì œê³µëœë‹¤.

---

#### Postgres ë°ì´í„°ë² ì´ìŠ¤ ìƒì„±

ë‹¤ìŒìœ¼ë¡œ, ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì„¤ì •í•˜ë ¤ë©´ **Continue to Dashboard**ì„ í´ë¦­í•˜ê³  í”„ë¡œì íŠ¸ ëŒ€ì‹œë³´ë“œì—ì„œ **Storage**íƒ­ì„ ì„ íƒí•˜ì. **Connect Store â†’** **Create New â†’ Postgres â†’ Continue**ì„ ì„ íƒí•œë‹¤.
![image](https://github.com/tamoimi/tami-dev-blog/assets/100749520/1226c804-88e9-412f-b626-bd65bb32c7ba)

ì•½ê´€ì— ë™ì˜í•˜ê³  ë°ì´í„°ë² ì´ìŠ¤ì— ì´ë¦„ì„ í• ë‹¹í•œ í›„ ë°ì´í„°ë² ì´ìŠ¤ ì§€ì—­ì´ **Washington D.C(iad1)** ë¡œ ì„¤ì •ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•˜ì. ì´ëŠ” ëª¨ë“  ìƒˆë¡œìš´ Vercel í”„ë¡œì íŠ¸ì˜ [ê¸°ë³¸ ì§€ì—­](https://vercel.com/docs/functions/serverless-functions/regions#select-a-default-serverless-region)ì´ê¸°ë„ í•˜ë‹¤.

ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ë™ì¼í•œ ì§€ì—­ì— ë°°ì¹˜í•˜ê±°ë‚˜ ì• í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œì— ê°€ê¹ê²Œ ë°°ì¹˜í•˜ë©´ ë°ì´í„° ìš”ì²­ì— ëŒ€í•œ [ëŒ€ê¸° ì‹œê°„](https://developer.mozilla.org/en-US/docs/Web/Performance/Understanding_latency)ì„ ì¤„ì¼ ìˆ˜ ìˆë‹¤.
![image](https://github.com/tamoimi/tami-dev-blog/assets/100749520/6aff92c6-5c6c-40da-b52f-cd43af26cd62)

â“ **Good to know:**

- ë°ì´í„°ë² ì´ìŠ¤ ì˜ì—­ì´ ì´ˆê¸°í™”ë˜ë©´ ë³€ê²½í•  ìˆ˜ ì—†ë‹¤. ë‹¤ë¥¸ [region](https://vercel.com/docs/storage/vercel-postgres/limits#supported-regions)ì„ ì‚¬ìš©í•˜ë ¤ë©´ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ìƒì„±í•˜ê¸° ì „ì— ë¨¼ì € ì„¤ì •í•´ì•¼ í•œë‹¤.

ì—°ê²°ë˜ë©´ `.env.local` íƒ­ìœ¼ë¡œ ì´ë™í•˜ì—¬ **Show secret** ë° **Copy Snippet**ë¥¼ í´ë¦­í•œë‹¤.
![image](https://github.com/tamoimi/tami-dev-blog/assets/100749520/0cca370e-4ac1-416f-8d01-3b95f7e5c417)
ì½”ë“œ í¸ì§‘ê¸°ë¡œ ì´ë™í•˜ì—¬ `.env.example` íŒŒì¼ì˜ ì´ë¦„ì„ `.env`ë¡œ ë°”ê¾¼ë‹¤. ê·¸ë¦¬ê³  Vercelì—ì„œ ë³µì‚¬í•œ ë‚´ìš©ì„ ë¶™ì—¬ë„£ëŠ”ë‹¤.

**ì¤‘ìš”**: GitHubì— í‘¸ì‹œí•  ë•Œ ë°ì´í„°ë² ì´ìŠ¤ ë¹„ë°€ì´ ë…¸ì¶œë˜ëŠ” ê²ƒì„ ë°©ì§€í•˜ë ¤ë©´ `.gitignore` íŒŒì¼ë¡œ ì´ë™í•˜ì—¬ ë¬´ì‹œëœ íŒŒì¼ì— `.env`ê°€ ìˆëŠ”ì§€ í™•ì¸í•˜ì.

ë§ˆì§€ë§‰ìœ¼ë¡œ í„°ë¯¸ë„ì—ì„œ `npm i @vercel/postgres`ë¥¼ ì‹¤í–‰í•˜ì—¬ [Vercel Postgres SDK](https://vercel.com/docs/storage/vercel-postgres/sdk)ë¥¼ ì„¤ì¹˜í•˜ì.

---

#### ë°ì´í„°ë² ì´ìŠ¤ ì‹œë“œ

ì´ì œ ë°ì´í„°ë² ì´ìŠ¤ê°€ ìƒì„±ë˜ì—ˆìœ¼ë¯€ë¡œ ì¼ë¶€ ì´ˆê¸° ë°ì´í„°ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‹œë“œí•´ë³´ì. ì´ë ‡ê²Œ í•˜ë©´ ëŒ€ì‹œë³´ë“œë¥¼ êµ¬ì¶•í•  ë•Œ ì‘ì—…í•  ì¼ë¶€ ë°ì´í„°ë¥¼ í™•ë³´í•  ìˆ˜ ìˆë‹¤.

í”„ë¡œì íŠ¸ì˜ `/scripts` í´ë”ì— `Seed.js`ë¼ëŠ” íŒŒì¼ì´ ìˆë‹¤. ì´ ìŠ¤í¬ë¦½íŠ¸ì—ëŠ” `invoices`, `customers`, `user`, `revenue`í…Œì´ë¸”ì„ ìƒì„±í•˜ê³  ì‹œë“œí•˜ê¸° ìœ„í•œ ì§€ì¹¨ì´ í¬í•¨ë˜ì–´ ìˆë‹¤.

ì½”ë“œê°€ ìˆ˜í–‰í•˜ëŠ” ëª¨ë“  ê²ƒì„ ì´í•´í•˜ì§€ ëª»í•˜ë”ë¼ë„ ê±±ì •í•˜ì§€ ë§ì. ê°œìš”ë¥¼ ì œê³µí•˜ê¸° ìœ„í•´ ìŠ¤í¬ë¦½íŠ¸ëŠ” **SQL**ì„ ì‚¬ìš©í•˜ì—¬ í…Œì´ë¸”ì„ ìƒì„±í•˜ê³  `placeholder-data.js` íŒŒì¼ì˜ ë°ì´í„°ë¥¼ ì‚¬ìš©í•˜ì—¬ ìƒì„±ëœ í…Œì´ë¸”ì„ ì±„ìš´ë‹¤.

ë‹¤ìŒìœ¼ë¡œ `package.json` íŒŒì¼ì—ì„œ ìŠ¤í¬ë¦½íŠ¸ì— `"seed"`ì¤„ì„ ì¶”ê°€í•œë‹¤:

```jsx
// /package.json
"scripts": {
  "build": "next build",
  "dev": "next dev",
  "start": "next start",
  "seed": "node -r dotenv/config ./scripts/seed.js"
},
```

ì´ê²ƒì€ `seed.js`ë¥¼ ì‹¤í–‰í•˜ëŠ” ëª…ë ¹ì–´ë‹¤.

ì´ì œ `npm run seed`ë¥¼ ì‹¤í–‰í•˜ì. ìŠ¤í¬ë¦½íŠ¸ê°€ ì‹¤í–‰ ì¤‘ì„ì„ ì•Œë ¤ì£¼ëŠ” ëª‡ ê°€ì§€ `console.log` ë©”ì‹œì§€ê°€ í„°ë¯¸ë„ì— í‘œì‹œë˜ì–´ì•¼ í•œë‹¤.

```jsx
// terminal
Created "users" table
Seeded 1 users
Created "customers" table
Seeded 10 customers
Created "invoices" table
Seeded 15 invoices
Created "revenue" table
Seeded 12 revenue
```

ğŸ’¥ **Troubleshooting:**

- `.env` íŒŒì¼ì— ë³µì‚¬í•˜ê¸° ì „ì— database secretsì„ ê³µê°œí•˜ì.
- ìŠ¤í¬ë¦½íŠ¸ëŠ” `bcrypt`ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‚¬ìš©ì ë¹„ë°€ë²ˆí˜¸ë¥¼ í•´ì‹œí•œë‹¤. `bcrypt`ê°€ í™˜ê²½ê³¼ í˜¸í™˜ë˜ì§€ ì•ŠëŠ” ê²½ìš° ëŒ€ì‹  [bcryptjs](https://www.npmjs.com/package/bcryptjs)ë¥¼ ì‚¬ìš©í•˜ë„ë¡ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì—…ë°ì´íŠ¸í•  ìˆ˜ ìˆë‹¤.
- ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì‹œë“œí•˜ëŠ” ë™ì•ˆ ë¬¸ì œê°€ ë°œìƒí•˜ì—¬ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë‹¤ì‹œ ì‹¤í–‰í•˜ë ¤ëŠ” ê²½ìš° ë°ì´í„°ë² ì´ìŠ¤ ì¿¼ë¦¬ ì¸í„°í˜ì´ìŠ¤ì—ì„œ `DROP TABLE tablename`ì„ ì‹¤í–‰í•˜ì—¬ ê¸°ì¡´ í…Œì´ë¸”ì„ ì‚­ì œí•  ìˆ˜ ìˆë‹¤. ìì„¸í•œ ë‚´ìš©ì€ ì•„ë˜ ì¿¼ë¦¬ ì‹¤í–‰ ì„¹ì…˜ì„ ì°¸ì¡°í•˜ì. í•˜ì§€ë§Œ ì¡°ì‹¬í•˜ì. ì´ ëª…ë ¹ì€ í…Œì´ë¸”ê³¼ ëª¨ë“  ë°ì´í„°ë¥¼ ì‚­ì œí•œë‹¤. placeholder ë°ì´í„°ë¡œ ì‘ì—…í•˜ê³  ìˆìœ¼ë¯€ë¡œ ì˜ˆì œ ì•±ì—ì„œ ì´ ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” ê²ƒì€ ê´œì°®ì§€ë§Œ í”„ë¡œë•ì…˜ ì•±ì—ì„œëŠ” ì´ ëª…ë ¹ì„ ì‹¤í–‰í•˜ë©´ ì•ˆëœë‹¤.
- Verce Postgres ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì‹œë“œí•˜ëŠ” ë™ì•ˆ ë¬¸ì œê°€ ê³„ì† ë°œìƒí•˜ëŠ” ê²½ìš° [discussion on GitHub](https://github.com/vercel/next-learn/issues) ì—´ì–´ í™•ì¸í•˜ì.

---

#### ë°ì´í„°ë² ì´ìŠ¤ íƒìƒ‰

ë°ì´í„°ë² ì´ìŠ¤ê°€ ì–´ë–»ê²Œ ìƒê²¼ëŠ”ì§€ ì‚´í´ë³´ì. Vercelë¡œ ëŒì•„ê°€ sidenavì—ì„œ **Data**ë¥¼ í´ë¦­í•œë‹¤.

ì´ ì„¹ì…˜ì—ì„œëŠ” users, customers, invoicesë° revenueì´ë¼ëŠ” 4ê°œì˜ ìƒˆë¡œìš´ í…Œì´ë¸”ì„ ì°¾ì„ ìˆ˜ ìˆë‹¤.
![image](https://github.com/tamoimi/tami-dev-blog/assets/100749520/3d6df1c2-a3fd-475c-9903-7cb0d372c4b6)
ê° í…Œì´ë¸”ì„ ì„ íƒí•˜ë©´ í•´ë‹¹ ë ˆì½”ë“œë¥¼ ë³´ê³  í•­ëª©ì´ `placeholder-data.js` íŒŒì¼ì˜ ë°ì´í„°ì™€ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

---

#### ì¿¼ë¦¬ ì‹¤í–‰

"query" íƒ­ìœ¼ë¡œ ì „í™˜í•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤ì™€ ìƒí˜¸ ì‘ìš©í•  ìˆ˜ ìˆë‹¤. ì´ ì„¹ì…˜ì—ì„œëŠ” í‘œì¤€ SQL ëª…ë ¹ì„ ì§€ì›í•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´ `DROP TABLE customers`ì„ ì…ë ¥í•˜ë©´ ëª¨ë“  ë°ì´í„°ì™€ í•¨ê»˜ "customers" í…Œì´ë¸”ì´ ì‚­ì œë˜ë¯€ë¡œ **ì£¼ì˜í•˜ì**!

ì²« ë²ˆì§¸ ë°ì´í„°ë² ì´ìŠ¤ ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•´ ë³´ì. Vercel ì¸í„°í˜ì´ìŠ¤ì— ë‹¤ìŒ SQL ì½”ë“œë¥¼ ë¶™ì—¬ë„£ê³  ì‹¤í–‰í•œë‹¤.

```jsx
SELECT invoices.amount, customers.name
FROM invoices
JOIN customers ON invoices.customer_id = customers.id
WHERE invoices.amount = 666;
```

ğŸ±â€ğŸ **result**

![image](https://github.com/tamoimi/tami-dev-blog/assets/100749520/87589ccc-f0f5-4260-be9a-7841b3f4b2b0)
